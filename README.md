# Bandgap-Reference-Analysis
Design and simulation of Ideal and Real Bandgap Reference (BGVR) circuits. Includes theoretical background, schematic diagrams, temperature coefficient analysis, PSRR, and mismatch effects based on Cadence simulations.
0# Bandgap Reference Circuit (BGR) Design

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Technology](https://img.shields.io/badge/Technology-gpdk090nm-blue.svg)](https://github.com/google/skywater-pdk)
[![Status](https://img.shields.io/badge/Status-Complete-brightgreen.svg)]()

## ðŸ“‹ Table of Contents

1. [BGR Introduction](#1-bgr-introduction)
2. [Device response to tempurature variations](#2-device-response-to-tempurature-variations)
3. [CTAT Voltage Generation](#3-ctat-voltage-generation)
4. [PTAT Voltage Generation](#4-ptat-voltage-generation)
5. [Self-Biased Current Mirror Circuit](#5-self-biased-current-mirror-circuit)
6. [Reference Branch Circuit](#6-reference-branch-circuit)


## 1. BGR Introduction

- The performance of analog circuits, parameters such as gain and bandwidth, depends on accurate bias volatges and currents. 
- These bias currents and voltages will vary again by the PVT(Process , Voltage , Tempurature) variations . 
- Bandgap reference circuits are essential in integrated citcuits to generate stable and precise voltage and current references, independent of PVT changes.


Voltage Reference circuits provide constant, stable voltage irrespective of variations in temperature, supply voltage, and process parameters.
It is a vital analog building block used in many applications like Low Dropout voltage regulators, Analog-to-Digital converters, Digital-to-Analog converters, Buck converters, etc. Compared to using a voltage regulator, a reference circuit lacks current-driving capability.

As per industry standards, a voltage reference in temperature is considered as from -40 to 125. Range of supply variation depends upon  application requirements, typically 10% to 20% from the typical value of supply voltage.


## 2. Device response to temperature variations
All electronic devices are sensitive to temperature variations.
If voltage across a device increases with the increase in temperature, then such devices are called PTAT (Proportional to Absolute Temperature).
If voltage decreases with the increase in temperature, then such devices are called CTAT (Complementary to Absolute Temperature).
Consider Fig. 1(a), where typical PTAT and CTAT voltage responses are shown. If we add PTAT and CTAT voltages, we get the response as shown in Fig. 1(b).
Thus, the response is combined to obtain a stable voltage by multiplying PTAT and CTAT voltages with suitable constants.
Fig. 2 forms the basic idea behind the band-gap reference.

Fig. 1:

(a) PTAT and CTAT responses

(b) Response of voltage reference


## 3. CTAT Voltage Generation

### Theory

CTAT voltage can be obtained from a diode if a constant current I is passed through as shown in Fig3:


### Circuit Implementation

```
VDD
 |
 R1
 |
 Q1 (BJT as diode)
 |
GND
```

### Key Characteristics

- **Temperature Coefficient**: -2mV/Â°C (typical)
- **Voltage Range**: 0.6V - 0.8V at room temperature
- **Process Sensitivity**: Moderate variation with process corners

## 3. PTAT Voltage Generation

### Theory

PTAT voltage is generated by exploiting the temperature dependence of the thermal voltage VT:

```
VT = kT/q â‰ˆ 26mV at 300K
```

The voltage difference between two BJTs with different current densities creates PTAT behavior:

```
VPTAT = VT Ã— ln(N) = (kT/q) Ã— ln(N)
```

Where N is the current density ratio between the two BJTs.

### Circuit Implementation

```
VDD
 |
 Current Mirror
 |    |
 Q1   Q2 (NÃ—Area)
 |    |
 R2   R3
 |    |
GND  GND
```

### Key Characteristics

- **Temperature Coefficient**: +0.087mV/Â°C per ln(N)
- **Area Ratio**: Typically 8:1 or 10:1
- **Voltage Range**: 50mV - 200mV (depending on design)

## 4. Self-Biased Current Mirror Circuit

### Purpose

The self-biased current mirror provides identical currents to all branches of the BGR circuit without requiring external bias. This ensures proper operation and temperature tracking.

### Circuit Topology

```
VDD
 |
M1---M2---M3
 |    |    |
 |   Q1   Q2
 |    |    |
 |   R1   R2
 |    |    |
GND  GND  GND
```

### Operating Principle

- **Master Branch**: Sets the reference current
- **Slave Branches**: Mirror the reference current with high accuracy
- **Self-Bias**: Internal feedback maintains stable operating point
- **Current Matching**: Typically >99% accuracy between branches

### Design Considerations

- **Transistor Sizing**: W/L ratios for proper current mirroring
- **Channel Length Modulation**: Minimized through cascode topology
- **Process Variations**: Compensated through layout techniques

## 5. Reference Branch Circuit

### Function

The reference branch combines CTAT and PTAT voltages to generate the final BGR output:

```
Vref = Vbe + (VPTAT Ã— R_ratio)
```

Where R_ratio determines the temperature coefficient cancellation.

### Circuit Implementation

```
VDD
 |
M_ref (Current Mirror)
 |
R_ref
 |
Q_ref (BJT)
 |
GND
```

### Design Equations

For zero temperature coefficient:

```
R_ref = R_PTAT Ã— (âˆ‚Vbe/âˆ‚T) / (âˆ‚VPTAT/âˆ‚T)
R_ref â‰ˆ R_PTAT Ã— 2mV/Â°C / 0.087mV/Â°C â‰ˆ 23 Ã— R_PTAT
```

### Optimization

- **Resistor Ratio**: Precisely controls temperature coefficient
- **Current Density**: Affects noise and accuracy
- **Load Sensitivity**: Minimized through proper buffering

## 6. Start-up Circuit

### Necessity

The start-up circuit is required to move out the self biased current mirror from degenerative bias point (zero current).

### Problem Statement

The self-biased current mirror has two stable states:
1. **Normal Operation**: Desired current flow
2. **Zero Current State**: Degenerative condition

### Solution Approach

The start-up circuit provides initial current to disturb the zero-current state:

```
VDD
 |
M_startup
 |
R_startup
 |
Enable Signal
```

### Design Requirements

- **Low Power**: Minimal impact on normal operation
- **Fast Response**: Quick transition to normal state
- **Self-Disabling**: Turns off after successful start-up
- **Process Robust**: Works across all corners

### Implementation Details

- **Threshold Detection**: Monitors BGR output voltage
- **Current Injection**: Provides startup current pulse
- **Disable Mechanism**: Turns off when Vref > threshold

## 7. Complete BGR Circuit

### System Integration

The complete BGR combines all subsystems:

```
Start-up â†’ Self-Biased Current Mirror â†’ PTAT/CTAT Generation â†’ Reference Branch â†’ Output Buffer
```

### Circuit Hierarchy

1. **Bias Generation**: Self-biased current mirrors
2. **Temperature Compensation**: PTAT and CTAT circuits
3. **Reference Generation**: Voltage summation
4. **Output Buffering**: Low impedance output
5. **Start-up Control**: Initialization circuit

### Design Methodology

1. **Specification Definition**: Target parameters
2. **Hand Calculations**: Initial component sizing
3. **SPICE Simulation**: Performance verification
4. **Layout Design**: Physical implementation
5. **Post-Layout Simulation**: Final verification

## 8. Simulation and Waveforms

### 8.1 Voltage (Vref) Variation vs Temperature (Basic Current Mirror)

**Test Conditions:**
- Supply Voltage: 3.3V
- Temperature Range: -40Â°C to 125Â°C
- Load Current: 10ÂµA

**Expected Results:**
- Vref @ 27Â°C: 1.25V Â± 50mV
- Temperature Coefficient: < 50 ppm/Â°C
- Voltage Variation: < 10mV over temperature

### 8.2 Temperature Coefficient Calculation

```
TC = (Vref_max - Vref_min) / (Vref_nom Ã— Î”T) Ã— 10^6 ppm/Â°C
```

**Target Specification:** < 20 ppm/Â°C

### 8.3 Voltage Coefficient (Basic Current Mirror)

**Test Conditions:**
- Temperature: 27Â°C
- Supply Range: 1.8V to 3.6V
- Load Current: 10ÂµA

**Expected Results:**
- Line Regulation: < 1mV/V
- PSRR: > 60dB at DC

### 8.4 BGR Circuit with Enable and Cascode Current Mirror

Enhanced version with:
- **Enable Control**: Power-down capability
- **Cascode Topology**: Improved current matching
- **Higher PSRR**: Better supply rejection

### 8.5 Current Matching (Cascode Current Mirror)

**Verification:**
- Branch current matching: >99%
- Process corner sensitivity: < 5%
- Temperature tracking: < 1% variation

### 8.6 PTAT and CTAT Cancellation (Cascode)

**Demonstration:**
- Individual PTAT and CTAT responses
- Combined response showing cancellation
- Residual temperature coefficient

### 8.7 Voltage Variation vs Temperature (Cascode)

**Improved Performance:**
- Temperature Coefficient: < 15 ppm/Â°C
- Voltage Variation: < 5mV over full range 
- Better linearity across temperature

### 8.8 Voltage Variation vs VDD (Cascode)

**Enhanced Supply Rejection:**
- Line Regulation: < 0.5mV/V
- PSRR: > 70dB at DC
- Supply Range: 1.8V to 3.6V

### 8.9 Optimized Temperature Coefficient

**Final Results:**
- Achieved TC: 12 ppm/Â°C
- Target Achievement: Exceeded specification
- Process Sensitivity: Minimal

### 8.10 Optimized Voltage Coefficient

**Final Results:**
- Line Regulation: 0.3mV/V
- PSRR: 75dB at DC
- Load Regulation: 0.1mV/mA

### 8.11 Start-Up Time Analysis

**Characteristics:**
- Start-up Time: < 10Âµs
- Settling Time: < 50Âµs
- Overshoot: < 5%

### 8.12 Enable Control Functionality

**Power Management:**
- Enable High: Normal operation
- Enable Low: Power-down mode
- Power Consumption: < 1ÂµA in shutdown




## 12. Future Work

### Short-term Improvements

- [ ] **Layout Optimization**: Reduce area by 20%
- [ ] **Power Reduction**: Target < 25ÂµW consumption
- [ ] **Noise Analysis**: Complete noise characterization
- [ ] **Process Corners**: Extended corner analysis

### Long-term Enhancements

- [ ] **Curvature Correction**: Second-order temperature compensation
- [ ] **Trimming Capability**: Post-fabrication adjustment
- [ ] **Digital Control**: Programmable temperature coefficient
- [ ] **Advanced Startup**: Faster, more robust initialization








